<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lightbox</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/lightbox.css">
</head>

<body>

    <div class="conatainer py-16 text-center">
        <h1>Lightbox</h1>

        <div>
            Checkout the <a href="https://github.com/bguanorigin/bguanorigin.github.io/blob/main/component-lightbox.html" target="_blank">demo</a> to see the HTML mockup.
        </div>

        <div style="margin-top:3rem;">
            <button class="btn open-lightbox" rel="default">Default Large</button>
            <button class="btn open-lightbox" rel="medium">Medium</button>
            <button class="btn open-lightbox" rel="small">Small</button>
            <button class="btn open-lightbox" rel="media-text">Media Text</button>
        </div>

    </div>
    
    
    <div class="lightbox lightbox-default">
        <div class="lightbox-inner">
            <div class="lightbox-content">
                <h2>Default Lightbox - Large</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a vulputate purus. Pellentesque lobortis lobortis augue a euismod. Aenean eu sem dapibus, tristique velit ullamcorper, sollicitudin lacus. Morbi non aliquam purus, ac faucibus nunc. Sed blandit ante a elit dictum, a pharetra ante dictum. Curabitur maximus lacus eget elit scelerisque, eu sagittis metus viverra. Suspendisse aliquet, quam et facilisis tristique, sem nisi interdum urna, vitae pellentesque dui eros in diam. Cras ut sollicitudin neque. Etiam tortor dui, lacinia ac turpis et, dapibus fringilla nunc. Quisque vel nunc ac leo scelerisque convallis at ornare justo. Proin bibendum orci nunc, a eleifend lectus rhoncus sed. Ut magna purus, vestibulum a dolor vel, varius venenatis lorem.</p>
            </div>
        </div>
    </div>
    
    <div class="lightbox lightbox-medium">
        <div class="lightbox-inner lightbox-inner-md">
            <div class="lightbox-content">
                <h2>Medium Lightbox</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a vulputate purus. Pellentesque lobortis lobortis augue a euismod. Aenean eu sem dapibus, tristique velit ullamcorper, sollicitudin lacus. Morbi non aliquam purus, ac faucibus nunc. Sed blandit ante a elit dictum, a pharetra ante dictum. Curabitur maximus lacus eget elit scelerisque, eu sagittis metus viverra. Suspendisse aliquet, quam et facilisis tristique, sem nisi interdum urna, vitae pellentesque dui eros in diam. Cras ut sollicitudin neque. Etiam tortor dui, lacinia ac turpis et, dapibus fringilla nunc. Quisque vel nunc ac leo scelerisque convallis at ornare justo. Proin bibendum orci nunc, a eleifend lectus rhoncus sed. Ut magna purus, vestibulum a dolor vel, varius venenatis lorem.</p>
            </div>
        </div>
    </div>
    
    <div class="lightbox lightbox-small">
        <div class="lightbox-inner lightbox-inner-sm">
            <div class="lightbox-content">
                <h2>Small Lightbox</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a vulputate purus. Pellentesque lobortis lobortis augue a euismod. Aenean eu sem dapibus, tristique velit ullamcorper, sollicitudin lacus. Morbi non aliquam purus, ac faucibus nunc. Sed blandit ante a elit dictum, a pharetra ante dictum. Curabitur maximus lacus eget elit scelerisque, eu sagittis metus viverra. Suspendisse aliquet, quam et facilisis tristique, sem nisi interdum urna, vitae pellentesque dui eros in diam. Cras ut sollicitudin neque. Etiam tortor dui, lacinia ac turpis et, dapibus fringilla nunc. Quisque vel nunc ac leo scelerisque convallis at ornare justo. Proin bibendum orci nunc, a eleifend lectus rhoncus sed. Ut magna purus, vestibulum a dolor vel, varius venenatis lorem.</p>
            </div>
        </div>
    </div>
    
    <div class="lightbox lightbox-media-text">
        <div class="lightbox-inner">
            <div class="lightbox-content lightbox-media-text">
                <div class="lightbox-left">
                    <img src="./img/dog.jpg" alt="">
                </div>
                <div class="lightbox-right">
                    <div class="lightbox-right-header">
                        <h2>Lightbox with Media and Text</h2>
                    </div>
                    <div class="lightbox-right-main">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a vulputate purus. Pellentesque lobortis lobortis augue a euismod. Aenean eu sem dapibus, tristique velit ullamcorper, sollicitudin lacus. Morbi non aliquam purus, ac faucibus nunc. Sed blandit ante a elit dictum, a pharetra ante dictum. Curabitur maximus lacus eget elit scelerisque, eu sagittis metus viverra. Suspendisse aliquet, quam et facilisis tristique, sem nisi interdum urna, vitae pellentesque dui eros in diam. Cras ut sollicitudin neque. Etiam tortor dui, lacinia ac turpis et, dapibus fringilla nunc. Quisque vel nunc ac leo scelerisque convallis at ornare justo. Proin bibendum orci nunc, a eleifend lectus rhoncus sed. Ut magna purus, vestibulum a dolor vel, varius venenatis lorem.</p>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a vulputate purus. Pellentesque lobortis lobortis augue a euismod. Aenean eu sem dapibus, tristique velit ullamcorper, sollicitudin lacus. Morbi non aliquam purus, ac faucibus nunc. Sed blandit ante a elit dictum, a pharetra ante dictum. Curabitur maximus lacus eget elit scelerisque, eu sagittis metus viverra. Suspendisse aliquet, quam et facilisis tristique, sem nisi interdum urna, vitae pellentesque dui eros in diam. Cras ut sollicitudin neque. Etiam tortor dui, lacinia ac turpis et, dapibus fringilla nunc. Quisque vel nunc ac leo scelerisque convallis at ornare justo. Proin bibendum orci nunc, a eleifend lectus rhoncus sed. Ut magna purus, vestibulum a dolor vel, varius venenatis lorem.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class Lightbox {

            constructor() {
            this.triggers = document.querySelectorAll('.open-lightbox')
            this.lightboxContentDivs = document.querySelectorAll('.lightbox-content')
            this.lightboxInit()
            this.clickOpen()
            this.clickClose()
            }

            lightboxInit(){
            this.lightboxContentDivs.forEach((contentDiv) => {

                // Create button element
                const closeButton = document.createElement('button');
                closeButton.className = 'close-lightbox';

                // SVG as a string
                const svgString = `<svg class="icon icon-close" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M13.364 0.636025C12.9734 0.245507 12.3403 0.245507 11.9497 0.636025L7 5.58577L2.05025 0.636025C1.65973 0.245507 1.02656 0.245507 0.636039 0.636025C0.245521 1.02654 0.245521 1.65972 0.636039 2.05024L5.58579 6.99999L0.636039 11.9497C0.245521 12.3403 0.245521 12.9734 0.636039 13.3639C1.02656 13.7545 1.65973 13.7545 2.05025 13.3639L7 8.4142L11.9497 13.3639C12.3403 13.7545 12.9734 13.7545 13.364 13.3639C13.7545 12.9734 13.7545 12.3403 13.364 11.9497L8.41421 6.99999L13.364 2.05024C13.7545 1.65972 13.7545 1.02654 13.364 0.636025Z" fill="#A8A8A8"></path>
                </svg>`;

                // Insert SVG string into button
                closeButton.innerHTML = svgString;

                // Append button before .lightbox-content
                contentDiv.parentNode.insertBefore(closeButton, contentDiv);

            })
            }

            clickOpen(){
            this.triggers.forEach((trigger)=>{
                trigger.addEventListener('click', ()=>{
                    let id = null
                    if(trigger.getAttribute('rel')){
                        id = trigger.getAttribute('rel')
                    }else{
                        id = trigger.querySelector('.wp-element-button').getAttribute('rel')
                    }
                    const lightbox = document.querySelector('.lightbox-' + id)

                    // Lightbox inner image lazy loading by click
                    const cardImage = document.querySelector('.card-image[rel="'+ id + '"] img')
                    const lightboxImage = lightbox.querySelector('img.lightbox-image')
                    if(cardImage && lightboxImage){
                        const imgUrl = cardImage.getAttribute('src')
                        if(imgUrl){
                        lightboxImage.setAttribute('src', imgUrl)    
                        }  
                    }

                    // Lightbox open
                    lightbox.classList.add('lightbox-open')
                })
            })
            }

            clickClose(){
            // Click close button
            const closeButtons = document.querySelectorAll('.close-lightbox')
            if (!closeButtons) return
            closeButtons.forEach((button)=>{
                button.addEventListener('click', ()=>{
                    const lightbox = button.closest('.lightbox')
                    if(!lightbox) return
                    lightbox.classList.remove('lightbox-open')
                })
            })
            // Click outside of lightbox card
            const lightboxes = document.querySelectorAll('.lightbox')
            if(!lightboxes) return
            lightboxes.forEach((lightbox)=>{
                lightbox.addEventListener('click', (e)=>{
                if(e.target === lightbox){
                    lightbox.classList.remove('lightbox-open')
                }
                })
            })
            
            }

            }

            // export default Lightbox

            
            new Lightbox();


    </script>
</body>
</html>